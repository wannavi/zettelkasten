---
title: 파이썬 리스트를 생각없이 쓰다 벌어진 일
date: 2022-10-10
---

## 중첩된 리스트를 생성할 때 `*` 연산을 주의하자.

```python

arr = [[0] * 100] * 100
arr[0][0] = 10

print(arr[0][0]) # 무엇이 나올까요?
print(arr[1][0])  # 무엇이 나올까요?
```

- 위 상황에서 출력되는 값은 무엇일까? 여기서 제대로 대답한다면 파이썬을 제대로 공부한 것이다.
  - 첫 번째는 예상대로 "10"이 출력되겠지만, 두 번째 질문에서 많이들 헷갈렸을 것이라고 생각한다. (아마 어딘가에선 들어본 값과 참조에 대한 개념에 의해.. ㅎㅎ)
  - 아무튼 두 번째 출력값도 "10"이 나오게 되고, 이는 파이썬에서 '완전히' 의도된 상황이라는 것이다.
    - 바로 새로 만들어내는 것이 아닌 복사를 해오게 되기 때문에 나타나는 현상이라고 생각하면 된다. (`call by reference`)
  - 여기서 왜 내부에 있는 `[0] * 100`에 대해서는 같은 현상이 나타나지 않을까라는 생각이 들면 더욱 더 좋은데, 이는 정수형이 파이썬에서 immutable한 특성을 가지고 있다는 점을 이해하면 손쉽게 이해가 가능합니다.
    - 예를 들어 `[random.randint(1, 2)] * 10` 을 실행해보면 모든 원소가 같은 1 또는 2를 가지게 되지만 연산을 통해 인덱스에 접근하여 변경하려 하면 새로운 정수가 할당된다는 개념으로 접근해야 합니다.
- 그래서 원래의 의도대로 각 배열이 독립적인 중첩 배열을 만들기 위해서는 아래와 같은 파이써닉한 문법을 이용하면 됩니다.

```python
arr = [[0] * 100 for _ in range(100)]

arr[0][0] = 10

print(arr[0][0]) # 10
print(arr[1][0])  # 0
```
