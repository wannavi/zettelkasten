---
title: (일) 힙 자료구조
date: 2022-12-11
---

## 주제 : #트리 #우선순위\_큐 #힙

## 메모

### 우선순위 큐(Priority queue)

트리와 밀접하게 연관되 있는 자료 구조입니다. 우선순위 큐는 순서대로 기다리고 있는 자료들을 저장하는 자료 구조라는 저장하는 자료 구조라는 점에서 큐와 비슷합니다. 단 우선순위 큐에서는 가장 먼저 입력된 자료가 가장 먼저 꺼내지는 것이 아니라, "우선순위"가 가장 높은 자료가 가장 먼저 꺼내진다는 차이가 있습니다.

위와 같은 특성 때문에 현실 세계에서도 자주 볼 수 있는 자료구조입니다. 수행할 작업이 여러 개 있고 시간이 제한되어 있을 때 우선순위가 높은 것부터 수행하는 일은 자주 볼 수 있는 일이기 떄문이죠.

아무 것도 모르는 상태에서 이러한 우선순위 큐를 구현한다고 생각한다면, 연결 리스트나 배열에 원소들을 집어넣고 원소를 꺼낼 때마다 탐색하여 우선순위가 가장 높은 원소를 찾아내는 방법이 떠오를 것 입니다. 이렇게 구현한다면 새로운 원소를 추가할 때는 O(1), 꺼낼 때는 탐색해야 해서 O(N)이 걸리겠습니다.

이것보다 더 나은 구현체가 바로 "균형 잡힌 이진 검색 트리"를 활용하는 방법입니다. 원소들을 우선순위로 정렬해 두면 최대 원소를 찾아 삭제하는 일과 삽입하는 일이 모두 O(lgN) 시간에 이뤄질 수 있습니다. 그러나 우리가 원하는 작업은 이보다 훨씬 간단하기 때문에 "균형 잡힌 이진 검색 트리"를 도입하는 것은 과하다고 말할 수도 있습니다.

우선순위 큐는 이진 검색 트리보다 훨씬 단순한 구조로도 구현할 수 있습니다. 그중 대표적인 것이 바로 `힙(heap)`이라는 트리입니다. 힙은 "가장 큰 원소"를 찾는 데 최적화된 이진 트리로, 힙을 사용하면 새 원소를 추가하는 연산과 가장 큰 원소를 꺼내는 연산을 모두 O(lgN) 시간에 수행할 수 있습니다. 실제로 힙을 사용하면 우선순위 큐를 아주 쉽게 구현할 수 있습니다. "우선순위"와 "실제 자료의 쌍"을 담는 힙을 만들고, 대소 관계를 비교할 때는 우선순위를 비교하도록 하면 됩니다.

- 힙이 갖는 가장 중요한 규칙은 "부모 노드"가 가진 원소는 항상 "자식 노드"가 가진 원소 이상이라는 점입니다.
  - 힙에서 대소관계 규칙은 이진 검색 트리와는 다르게 부모 자식 관계에만 적용됩니다.
- 물론 위 조건만으로는 트리가 기울어 지는 문제가 발생하므로 트리의 높이를 항상 일정하게 유지하기 위한 "트리의 구조에 대한 제약조건"을 둡니다. 이를 "힙의 모양 규칙"이라 하고 아래와 같은 조건이 있습니다.
  - 마지막 레벨을 제외한 모든 레벨에 노드가 꽉 차 있어야 한다.
  - 마지막 레벨에 노드가 있을 때는 항상 가장 왼쪽부터 순서대로 채워져 있어야 한다.
- 배열을 이용하여 힙을 손쉽게 구현할 수 있는데 여기서는 깊게 다루지 않는다.
  - 먼저, 자식과 부모 사이의 배열내의 위치(인덱스)가 수학적으로 표현된다는 점과 적절한 규칙을 통한 교환이 있으면 힙의 모양 규칙을 만족한다는 점을 이용해 구현된다.
    - 삽입할 때는 가장 끝의 노드에 배치 한 뒤에 부모와 우선순위를 비교하여 계속 교환한다.
    - 꺼낼 때는 루트를 꺼내고 힙 모양 규칙을 맞추기 위해 가장 끝 노드를 루트로 올린 뒤 자식들과 비교하여 계속 교환한다.
  - [최대힙 구현체](https://gist.github.com/wannavi/7e5c28422205282239c02900228ad741)

### STL priority_queue

```c++

```

## 참고문헌

- [바킹독](https://blog.encrypted.gg/1015)

## 연결문서
